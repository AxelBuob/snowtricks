{% extends 'base.html.twig' %}

{% block body %}
<header id="header" class="h-100 w-100 d-flex flex-column justify-content-center text-center mx-auto">
    <div class="jumbotron">
        <h1 class="display-4">Snowtricks!</h1>
        <p class="lead">Site communautaire des figures de Snowboard</p>
    </div>
    <div class="position-absolute end-0 bottom-0 py-5 px-5">
        <a href="#main">
            <i class="fas fa-arrow-down fa-3x"></i>
        </a>
    </div>
</header>

<div id="main">
    <main class="container-fluid py-3">
        <div class="d-flex flex-wrap justify-content-around" style="gap: 1em">
            {% for post in posts.results %}
            <div class="card">
                {% if post.image is defined and post.image is not null %}
                    <img width="300" height="auto" src="{{ asset('uploads/post/' ~ post.image.name) }}" alt="Figure de snowboard">
                {% else %}
                    <img width="300" height="auto" src="{{ asset('build/images/post.jpeg') }} " alt="">
                {% endif %}
                <div class="card-body d-flex flex-row justify-content-between">
                    <div>
                        <h5 class="card-title"><a href="{{ path('post_show', {slug: post.slug}) }}">{{ post.name }}</a></h5>
                    </div>
                    {% if is_granted('ROLE_USER') %}
                    <div>
                        <a href="{{ path('post_edit', {slug: post.slug} ) }}"><i class="fas fa-pencil-alt me-2"></i></a>
                        <a data-bs-toggle="modal" data-bs-target="#modal-post" href="#" >
                            <i class="far fa-trash-alt"></i>
                        </a>
                    </div>
                    {% endif %}
                </div>
            </div>
            {{ include('post/_confirm_delete.html.twig')}}
            {% endfor %}   
        </div>
        
        {% if posts.hasToPaginate %}
        <div class="d-flex justify-content-center pt-5">
            <nav aria-label="Page navigation">
                <ul class="pagination">
                    {% if posts.hasPreviousPage %}
                    <li class="page-item">
                        <a class="page-link" aria-label="Previous" href="{{ path('app_home_paginated', {page: posts.previousPage}) }}">
                            <span aria-hidden="true">&laquo;</span>
                            <span class="sr-only">Previous</span>
                        </a>
                    </li>
                    {% endif %}
                    {% if posts.hasNextPage %}
                    <li class="page-item">
                        <a class="page-link" aria-label="Next" href="{{ path('app_home_paginated', {page: posts.nextPage}) }}">
                            <span aria-hidden="true">&raquo;</span>
                            <span class="sr-only">Previous</span>
                        </a>
                    </li>
                    {% endif %}
                </ul>
            </nav>
        </div>
        {% endif %}
    
        <div class="position-relative text-end px-5">
            <a href="#header ">
                <i class="fas fa-arrow-up fa-3x"></i>
            </a>
        </div>
        
    </main>
</div>
{% endblock %}

{% block javascripts %}
    {{ encore_entry_script_tags('app') }}
    {# {{ encore_entry_script_tags('post_index') }} #}
{% endblock %}
