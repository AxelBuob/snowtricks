{% extends 'base.html.twig' %}

{% block title %}
    {{ title }}
{% endblock %}

{% block body %}

<div class="container">
    <h1>{{ title }}</h1>
    {% if post is defined %}
        <a data-bs-toggle="modal" data-bs-target="#modal-post" class="btn btn-outline-danger" href="{{ path('post_delete', {id: post.id}) }}">Supprimer</a>
        {{ include('post/_confirm_delete.html.twig')}}
    {% endif %}
    <div>
        {{ form_start(form) }}
            {{ form_widget(form) }}
            {% if app.request.attributes.get('_route') == 'post_edit' %}
                <div class="d-flex flex-wrap gap-2">
                {% for image in post.images %}
                    <a  href="{{ asset('uploads/post/' ~ image.name) }}">
                        <div class="text-center">
                            <img class="d-block" src="{{ asset('uploads/post/' ~ image.name) }}" alt="" width="200px" height="150px" style="object-fit: cover;">
                            <a data-bs-toggle="modal" data-bs-target="#modal-image" class="d-block link-danger border border-danger border-2 p-1" href="{{ path('delete_image', {id: image.id}) }}">
                                <i class="far fa-trash-alt"></i>
                            </a>
                            {{ include('post/_confirm_delete.html.twig')}}
                        </div>
                    </a>
                {% endfor %}
                </div>
            {% endif %}
            <div class="mt-3">
                <button type="submit" class="btn btn-primary">{{ button_label | default('Enregistrer') }}</button>
            </div>
        {{ form_end(form) }}
    </div>
</div>

{% endblock %}

{% block javascripts %}
    {{ encore_entry_script_tags('app') }}
{% endblock %}